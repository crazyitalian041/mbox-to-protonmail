# ğŸ“¬ MBOX to Proton Mail Importer

A Python script to efficiently upload `.mbox` email archives to **Proton Mail** using **IMAP via Proton Mail Bridge**.  
Supports **resuming uploads**, **skipping duplicates**, **handling large MBOX files**, and **recovering from errors (502, size limits, missing headers, etc.).**

---

## ğŸš€ Features
âœ… **Efficient Uploading** â€“ Skips already uploaded emails to avoid duplicates.  
âœ… **Error Handling** â€“ Automatically retries 502 errors and logs failed uploads.  
âœ… **Size Limits** â€“ Skips emails **larger than 30MB** (Proton Mail limit).  
âœ… **Resumable Uploads** â€“ Restart without re-uploading everything.  
âœ… **Fixes Missing Headers** â€“ Ensures every email has a valid `Date:` field.  
âœ… **Proton Mail Bridge Compatibility** â€“ Works seamlessly with Proton Mail Bridge.  

---

## ğŸ“¥ Installation

### **1ï¸âƒ£ Install Dependencies**
Make sure you have Python 3 installed, then install required packages:
```bash
pip install imapclient chardet

ğŸ› ï¸ Setting Up Proton Mail Bridge

To use this script, you must have Proton Mail Bridge installed and configured.

1ï¸âƒ£ Install Proton Mail Bridge
	â€¢	macOS:

brew install --cask protonmail-bridge

Or download it from Proton Mail Bridge for macOS.

	â€¢	Windows/Linux:
Download and install from Proton Mail Bridge Download Page.

2ï¸âƒ£ Configure Proton Mail Bridge
	1.	Open Proton Mail Bridge on your computer.
	2.	Log in to your Proton Mail account.
	3.	Go to â€œMailbox Configurationâ€ and find:
	â€¢	IMAP Username (Example: bridge-abc123@protonmail.com)
	â€¢	IMAP Password (Auto-generated by Proton Mail Bridge)
	â€¢	IMAP Server: 127.0.0.1
	â€¢	IMAP Port: 1143 (or 993 if SSL is enabled)

3ï¸âƒ£ Clone This Repository

git clone https://github.com/crazyitalian041/mbox-to-protonmail/mbox-to-protonmail.git
cd mbox-to-protonmail

4ï¸âƒ£ Configure Your MBOX Import

Edit upload_mbox.py and update:

USERNAME = "your-imap-username"  # From Proton Mail Bridge
PASSWORD = "your-imap-password"
MBOX_FILE = "/path/to/your/file.mbox"  # Change this
DESTINATION_FOLDER = "Folders/Hey Archive"  # Proton Mail IMAP folder

ğŸ“¤ Usage

Start Uploading Emails

python upload_mbox.py

This will:
	â€¢	Connect to Proton Mail Bridge
	â€¢	Skip already uploaded emails
	â€¢	Upload emails batch-by-batch
	â€¢	Handle errors automatically

Check How Many Emails Are Uploaded

To see how many emails are already uploaded:

python count_uploaded.py

âš ï¸ Troubleshooting

1ï¸âƒ£ Login Fails (no such user)
	â€¢	Solution: Open Proton Mail Bridge and copy the correct IMAP Username and Password.

2ï¸âƒ£ too many login attempts
	â€¢	Solution: Wait 10-15 minutes and restart Proton Mail Bridge:

brew services restart protonmail-bridge

3ï¸âƒ£ invalid rfc5322 message: Required header field 'Date' not found or empty'
	â€¢	Solution: The script automatically fixes missing Date: headers.

4ï¸âƒ£ message exceeds maximum import size of 30MB
	â€¢	Solution: Proton Mail does not accept emails larger than 30MB. These are skipped and logged.

5ï¸âƒ£ 502 Bad Gateway Errors
	â€¢	Solution: The script automatically retries failed uploads. If they persist, try:

brew services restart protonmail-bridge


6ï¸âƒ£ Check Skipped Emails

Skipped emails (oversized, corrupt, etc.) are logged in:

cat skipped_emails.log

ğŸ‘¥ Credits

This script was developed to streamline MBOX imports into Proton Mail using IMAP and Python.
Author: Robert DeJesus

ğŸ“œ License

This project is licensed under the MIT License. See LICENSE for details.

ğŸŒŸ Contributing

Pull requests are welcome! If you have improvements, fork this repo and submit a PR.
Issues and bug reports can be submitted in the Issues tab.

---

## **ğŸš€ How to Use This README**
1. Save this as **README.md** in your GitHub repository.
2. Replace `"YOUR_GITHUB_USERNAME"` with your actual **GitHub username**.
3. If you want to **add a license**, create a `LICENSE` file.
4. Push it to GitHub:
   ```bash
   git add README.md
   git commit -m "Added README"
   git push origin main

ğŸ”¹ Whatâ€™s New in This README

âœ… Added Proton Mail Bridge installation instructions (macOS, Windows, Linux)
âœ… Included step-by-step guide for getting IMAP credentials
âœ… Made troubleshooting Proton Bridge errors easier
